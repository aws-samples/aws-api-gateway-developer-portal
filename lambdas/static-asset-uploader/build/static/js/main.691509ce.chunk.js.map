{"version":3,"sources":["services/get-fragments.js","services/api.js","pages/Home.jsx","pages/GettingStarted.jsx","services/state.js","services/api-catalog.js","pages/Dashboard.jsx","services/self.js","components/ApisMenu.jsx","components/SwaggerUiLayout.jsx","pages/Apis.jsx","components/AlertPopup.jsx","components/SignIn.jsx","components/Register.jsx","components/SignOut.jsx","components/NavBar.jsx","index.js"],"names":["fragments","observable","loadHtml","path","fragment","jsx","fetch","then","response","text","parsedMarkdown","frontmatter","Object","objectSpread","react_default","a","createElement","with_html_default","escapeHtml","source","body","renderers","attributes","cachedClient","link","_ref","href","props","objectWithoutProperties","test","assign","target","rel","Link","to","HomePage","observer","Fragment","Segment","vertical","textAlign","style","color","backgroundColor","padding","margin","Image","centered","size","src","Header","as","Home","header","tagline","Button","positive","gettingStartedButton","apiListButton","Container","fluid","GettingStarted","awsRegion","window","config","region","cognitoRegion","cognitoUserPoolId","userPoolId","cognitoIdentityPoolId","identityPoolId","cognitoClientId","userPoolClientId","initApiGatewayClient","arguments","length","undefined","accessKeyId","secretAccessKey","sessionToken","apigClientFactory","newClient","accessKey","secretKey","apiGatewayClient","Promise","resolve","poller","setInterval","clearInterval","AWS","store","api","apiList","catalog","apiGateway","generic","storeCache","map","usagePlan","apis","_","cloneDeep","toConsumableArray","_ref2","reduce","acc","concat","createApiList","forEach","specificLogo","id","stage","logo","headers","Accept","redirect","ok","updateSubscriptionStatus","subscriptions","computed","usagePlanId","subscribed","find","sub","catalogPromiseCache","subscriptionsPromiseCache","apiKeyPromiseCache","updateAllUserData","bustCache","all","updateCatalogAndApisList","updateSubscriptions","apiKeyOrPromise","apiKey","get","_ref3","data","value","updateApiKey","catalogOrPromise","_ref$data","catch","subscriptionsOrPromise","mapUsageByDate","usage","usedOrRemaining","apiKeyDates","keys","items","apiKeyId","apiKeyUsage","startDate","dateParts","split","year","month","day","apiKeyDate","Date","setHours","usedOrRemainingIndex","Array","isArray","date","setDate","getDate","item","mapApiKeyUsageByDate","dates","index","dailyUsage","sort","confirmMarketplaceSubscription","token","put","loadUsage","canvasId","start","end","getFullYear","getMonth","toJSON","result","ctx","document","getElementById","JSON","stringify","chartConfig","type","labels","d","parseInt","toLocaleDateString","datasets","label","lineTension","borderColor","borderWidth","pointRadius","pointHoverRadius","options","scales","yAxes","ticks","beginAtZero","Chart","error","cognitoUser","userPool","Grid","container","Row","Column","paddingTop","background","border","borderRadius","Divider","filter","firstApiName","swagger","info","title","extraApiCount","List","Item","key","width","widescreen","marginBottom","Popup","trigger","cursor","content","on","position","Message","toString","Loader","active","poolData","UserPoolId","ClientId","isAuthenticated","getCognitoLoginKey","login","email","password","authenticationDetails","AuthenticationDetails","Username","Password","CognitoUser","Pool","CognitoUserPool","reject","authenticateUser","onSuccess","credentials","CognitoIdentityCredentials","IdentityPoolId","Logins","defineProperty","getIdToken","getJwtToken","refresh","console","post","onFailure","logout","signOut","localStorage","clear","MenuHeader","children","Menu","_React$Component","ApisMenu","_getPrototypeOf2","_this","classCallCheck","this","_len","args","_key","possibleConstructorReturn","getPrototypeOf","call","apply","state","selectedApi","handleClick","log","setState","prev","isActive","apiId","inherits","createClass","_this2","params","_this3","_this$props","inverted","attached","ApisMenu_MenuHeader","onClick","React","Component","InfoReplacement","specSelectors","basePath","host","externalDocs","className","display","flex","marginRight","fontWeight","version","SwaggerUiLayout_SubscriptionButtons","SubscriptionButtons","delete","SwaggerLayoutPlugin","components","InfoContainer","ApisPage","updateApi","selectIt","thisApi","getApi","match","swaggerUiConfig","dom_id","plugins","supportedSubmitMethods","spec","onComplete","uiHandler","preauthorizeApiKey","SwaggerUI","errorHeader","errorBody","overflow","components_ApisMenu","icon","Icon","name","circular","Content","AlertPopup","isVisible","message","handleDismiss","hidden","negative","floating","onDismiss","SignIn","isSubmitting","signedIn","errorMessage","isOpen","open","close","handleChange","event","handleLogin","preventDefault","e","Redirect","Modal","onOpen","onClose","Form","onSubmit","loading","Input","onChange","autoComplete","Actions","primary","Register","handleRegister","attributeList","signUp","err","register","SignOut","forceUpdate","cloneElement","NavBar","authed","borderless","paddingRight","APIs","SignOut_SignOut","SignIn_SignIn","Register_Register","App","getCurrentUser","getSession","session","hashRoute","location","hash","substring","history","pushState","BrowserRouter","components_NavBar","AlertPopup_AlertPopup","Switch","Route","exact","component","Dashboard","Apis","ReactDOM","render","src_App"],"mappings":"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","file":"static/js/main.691509ce.chunk.js","sourcesContent":["// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// react-router\nimport { Link } from 'react-router-dom'\n\n// mobx\nimport { observable } from 'mobx'\n\n// markdown parsing\nimport frontmatter from 'front-matter'\nimport Markdown from 'react-markdown/with-html'\n\nexport const fragments = observable({})\n\nloadHtml('/custom-content/content-fragments/GettingStarted.md', 'GettingStarted')\nloadHtml('/custom-content/content-fragments/Home.md', 'Home')\nloadHtml('/custom-content/content-fragments/APIs.md', 'APIs')\n\n/**\n * \n * Pre-load the custom-content markdown, parses its frontmatter, and renders it as JSX. This method is asynchronous and doesn't actually return anything -- instead, it acts on a MobX Observable -- the fragment. The fragment is an object with a `jsx` property that maps to the rendered component, and any number of other properties collected from the front-matter.\n * \n * @param {String} path   Path to the file to load in. Should be a markdown file.\n * @param {String} fragment   Name of the fragment. Determines where rendered data gets stored.\n * \n * @returns {Object} \n */\nfunction loadHtml(path, fragment) {\n  // if we want to display a loading indicator, this would be where\n  fragments[fragment] = { jsx: () => null }\n\n  fetch(path).then(response => response.text().then(text => {\n    let parsedMarkdown = frontmatter(text)\n\n    fragments[fragment] = {\n      jsx: () => (\n        <Markdown \n          escapeHtml={false} \n          source={parsedMarkdown.body}\n          renderers={renderers}\n        />\n      ),\n      ...parsedMarkdown.attributes\n    }\n  }))\n}\n\n/**\n * Renderers is a map of node type to component. \n * \n * In this case, we only override links. Any time react-markdown tries to render a link, it'll render this component. Normal links will work, but the cause a full page reload. We don't want that, so we can replacing them with react-router Links. However, replacing external links with react-router Links causes them to not work at all. We don't want that either, so we attempt to determine if a link is external or not, and use `Link` or `a` appropriately.\n */\nconst renderers = {\n  link: ({ href, ...props }) => {\n    // if absolute url, use an `a` tag\n    // https://stackoverflow.com/a/19709846/4060061\n    if (/^(?:[a-z]+:)?\\/\\//i.test(href))\n      return <a href={href} target=\"_blank\" rel=\"noopener noreferrer\" {...props} />\n\n    // replace links with react-router-dom tags so that they \n    return <Link to={href} {...props} />\n  }\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport AWS from 'aws-sdk'\n\nexport const awsRegion = window.config.region\nexport const cognitoRegion = window.config.region\nexport const cognitoUserPoolId = window.config.userPoolId\nexport const cognitoIdentityPoolId = window.config.identityPoolId\nexport const cognitoClientId = window.config.userPoolClientId\n\nAWS.config.region = cognitoRegion\n\nlet cachedClient\n\nexport function initApiGatewayClient({ accessKeyId, secretAccessKey, sessionToken } = {}) {\n  cachedClient = window.apigClientFactory.newClient({\n    accessKey: accessKeyId,\n    secretKey: secretAccessKey,\n    sessionToken: sessionToken,\n    region: awsRegion\n  })\n}\n\nexport function apiGatewayClient() {\n  if (cachedClient) return Promise.resolve(cachedClient)\n  \n  return new Promise(resolve => {\n    const poller = setInterval(() => {\n      if (cachedClient) {\n        clearInterval(poller)\n        resolve(cachedClient)\n      }\n    }, 100)\n  })\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// mobx\nimport { observer } from 'mobx-react'\n\n// fragments\nimport { fragments } from 'services/get-fragments'\n\n// react-router\nimport { Link } from 'react-router-dom'\n\n// semantic-ui\nimport { Header, Segment, Container, Image, Button } from 'semantic-ui-react'\n\nexport const HomePage = observer(() => (\n  <React.Fragment>\n    <Segment vertical textAlign='center' style={{ color: \"whitesmoke\", backgroundColor: \"slategray\", padding: \"40px 0px\", margin: \"0px !important\" }}>\n      <Image centered size='small' src='/custom-content/home-image.png' />\n      <Header as='h1' style={{ color: \"whitesmoke\" }}>{fragments.Home.header}</Header>\n      <p>{fragments.Home.tagline}</p>\n      <Link to=\"/getting-started\"><Button positive>{fragments.Home.gettingStartedButton}</Button></Link>\n      <Link to=\"/apis\" style={{ padding: \"0.78571429em 1.5em 0.78571429em\", color: \"white\" }}>{fragments.Home.apiListButton}</Link>\n    </Segment>\n    <Segment vertical style={{ padding: \"40px 0px\", margin: \"0 !important\" }}>\n      <Container fluid text textAlign='justified'>\n        <fragments.Home.jsx />\n      </Container>\n    </Segment>\n  </React.Fragment>\n))\n\nexport default HomePage\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// mobx\nimport { observer } from 'mobx-react'\n\n// fragments\nimport { fragments } from 'services/get-fragments'\n\n// semantic-ui\nimport { Container } from 'semantic-ui-react'\n\nexport default observer(() => (\n  <Container style={{ padding: \"40px\" }}>\n    <fragments.GettingStarted.jsx />\n  </Container>\n))\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { observable, computed } from 'mobx'\nimport _ from 'lodash'\n\nimport { getSubscribedUsagePlan } from 'services/api-catalog'\n\nexport const store = observable({\n  api: undefined,\n  apiList: undefined,\n\n  /**\n   * We have a bunch of side-effects we need to run when we're setting `catalog` and \n   * `subscriptions`. That's accomplished by using getters and setters. We're storing\n   * the actual data in `storeCache` so that people can't update `catalog` and \n   * `subscriptions` without hitting the side-effects.\n   */\n\n  // Catalog side-effects\n  // 1 - update each api to have a usagePlan object nested in them\n  // 2 - update the apiList based on the catalog \n  // 3 - update the subscribed status of each api\n  set catalog(catalog = []) {\n    storeCache.catalog = addUsagePlanToApis(catalog)\n    store.apiList = createApiList(storeCache.catalog)\n    fetchApiImage(store.apiList)\n    updateSubscriptionStatus()\n\n    return storeCache.catalog\n  },\n  get catalog() { return storeCache.catalog },\n\n  // Subscription side-effects\n  // 1 - update the subscribed status of each api\n  set subscriptions(subscriptions = []) {\n    storeCache.subscriptions = subscriptions\n    updateSubscriptionStatus()\n\n    return storeCache.subscriptions\n  },\n  get subscriptions() { return storeCache.subscriptions },\n}, {\n    catalog: computed,\n    subscriptions: computed\n  })\n\n// This is the cache for the actual catalog and subscriptions. DO NOT MODIFY and DO NOT USE.\nconst storeCache = observable({\n  catalog: {\n    apiGateway: [],\n    generic: []\n  },\n  subscriptions: []\n})\n\n/**\n * A function that takes an input catalog and performs some side-effects on it.\n * \n * - Makes sure each api has a non-recursive 'usagePlan' object\n * - recalculates the `apiList`\n */\nfunction addUsagePlanToApis({ apiGateway, generic }) {\n  return {\n    apiGateway: apiGateway.map(usagePlan => {\n      usagePlan.apis = usagePlan.apis.map(api => {\n        api.usagePlan = _.cloneDeep(usagePlan)\n        // remove the apis from the cloned usagePlan so we don't go circular\n        delete api.usagePlan.apis\n        return api\n      })\n\n      return usagePlan\n    }),\n    generic: [...generic]\n  }\n}\n\nfunction createApiList({apiGateway, generic}) {\n  return {\n    apiGateway: apiGateway.reduce((acc, usagePlan) => acc.concat(usagePlan.apis), []),\n    generic: [...generic]\n  }\n}\n\nfunction fetchApiImage() {\n  store.apiList.apiGateway.forEach(api => {\n    let specificLogo = `/custom-content/api-logos/${api.id}_${api.stage}.png`\n\n    // fetch automatically follows redirects; setting redirect to `manual` prevents this\n    // we need to prevent it so that we can accurately determine if the image exists\n    if (!api.logo)\n      fetch(specificLogo, { headers: { Accept: \"image/png\" }, redirect: \"manual\" }).then(response => {\n        if (response.ok)\n          api.logo = specificLogo\n\n        else api.logo = '/custom-content/api-logos/default.png'\n      })\n  })\n}\n\n/**\n * A helper function that simple re-builds the subscribed status for each api in the catalog.\n * \n * Should be run every time either the catalog updates or the \n */\nfunction updateSubscriptionStatus() {\n  if (storeCache.catalog)\n    storeCache.catalog.apiGateway.forEach(usagePlan => {\n      let subscribed = !!getSubscribedUsagePlan(usagePlan.id)\n      usagePlan.subscribed = subscribed\n\n      usagePlan.apis.forEach(api => api.subscribed = subscribed)\n    })\n}\n\nexport default store\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { apiGatewayClient } from './api'\nimport { store } from './state'\n\n/* Catalog and API Utils */\n\n/**\n * \n * Does all operations to get user data at once.\n * \n * @param {Boolean} bustCache=true   Ignore the cache and re-make the calls? Defaults to true.\n */\nexport function updateAllUserData(bustCache = true) {\n  return Promise.all([\n    updateCatalogAndApisList(bustCache),\n    updateSubscriptions(bustCache),\n    updateApiKey(bustCache)\n  ])\n}\n\n/**\n * \n * Update the catalog for the current user. Both request and response are cached, so unless the cache is busted, this should only ever make one network call.\n * \n * @param {Boolean} [bustCache=false]   Ignore the cache and re-make the network call. Defaults to false.\n * \n */\nexport function updateCatalogAndApisList(bustCache = false) {\n  let catalogOrPromise = store.catalog.length ? store.catalog : catalogPromiseCache\n  if (!bustCache && catalogOrPromise) return Promise.resolve(catalogOrPromise)\n\n  return catalogPromiseCache = apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/catalog', {}, {}, {}))\n    .then(({ data = [] }) => (store.catalog = data))\n    .catch(() => {\n      // catch a failed request and set catalog to a blank array\n      return (store.catalog = [])\n    })\n}\nlet catalogPromiseCache // WARNING: Don't touch this. Should only be used by updateCatalogAndApisList.\n\n/**\n * Return the API with the provided apiId. Can also provide the special strings \"FIRST\" or \"ANY\" to get the first API returned. Can select the api returned as a side-effect.\n * \n * @param {String} apiId   An apiId or the special strings 'FIRST' or 'ANY'. 'FIRST' and 'ANY' both return the first api encountered.\n * @param {Boolean} [selectIt=false]   If true, sets the found API as the current 'selected' API.\n */\nexport function getApi(apiId, selectIt = false) {\n  return updateCatalogAndApisList()\n    .then(() => {\n      let thisApi\n  \n      if (store.apiList.apiGateway.length) {\n        if (apiId === 'ANY' || apiId === 'FIRST') {\n          thisApi = store.apiList.apiGateway[0]\n        }\n\n        else {\n          thisApi = store.apiList.apiGateway.find(api => api.id === apiId)\n        }\n\n        if (thisApi === undefined) {\n          thisApi = store.apiList.generic.find(api => api.id.toString() === apiId)\n        }\n      }\n\n      if (selectIt) store.api = thisApi\n\n      return thisApi\n    })\n}\n\n/* Subscription Utils */\n\n/**\n * Fetch and update subscriptions store. Uses caching to determine if it should actually fetch or return the stored result.\n * \n * @param {Boolean} [bustCache=false]   Ignore the cache and re-make the network call. Defaults to false.\n */\nexport function updateSubscriptions(bustCache = false) {\n  let subscriptionsOrPromise = store.subscriptions.length ? store.subscriptions : subscriptionsPromiseCache\n  if (!bustCache && subscriptionsOrPromise) return Promise.resolve(subscriptionsOrPromise)\n\n  return subscriptionsPromiseCache = apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/subscriptions', {}, {}, {}))\n    .then(({ data }) => (store.subscriptions = data))\n}\nlet subscriptionsPromiseCache // WARNING: Don't touch this. Should only be used by updateCatalogAndApisList.\n\nexport function getSubscribedUsagePlan(usagePlanId) {\n  return store.subscriptions.find(sub => sub.id === usagePlanId)\n}\n\nexport function subscribe(usagePlanId) {\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.put('/subscriptions/' + usagePlanId, {}, {}))\n    .then(() => updateSubscriptions(true))\n}\n\nexport function unsubscribe(usagePlanId) {\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.delete(`/subscriptions/${usagePlanId}`, {}, {}))\n    .then(() => updateSubscriptions(true))\n}\n\n/**\n * \n * Fetches and updates the apiKey in the store. Both request and response are cached, so unless the cache is busted, this should only ever make one network call.\n * \n */\nexport function updateApiKey(bustCache) {\n  let apiKeyOrPromise = store.apiKey ? store.apiKey : apiKeyPromiseCache\n  if (!bustCache && apiKeyOrPromise) return Promise.resolve(apiKeyOrPromise)\n\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/apikey', {}, {}, {}))\n    .then(({data}) => (store.apiKey = data.value))\n}\nlet apiKeyPromiseCache\n\nexport function fetchUsage(usagePlanId) {\n  const date = new Date()\n  const start = new Date(date.getFullYear(), date.getMonth(), 1).toJSON().split('T')[0]\n  const end = new Date().toJSON().split('T')[0]\n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.get('/subscriptions/' + usagePlanId + '/usage', { start, end }, {}))\n}\n\nexport function mapUsageByDate(usage, usedOrRemaining) {\n  const apiKeyDates = {}\n  Object.keys(usage.items).forEach(apiKeyId => {\n    apiKeyDates[apiKeyId] = mapApiKeyUsageByDate(usage.items[apiKeyId], usage.startDate, usedOrRemaining)\n  })\n  \n  const dates = {}\n  Object.keys(apiKeyDates).forEach((apiKeyId, index) => {\n    const apiKeyUsage = apiKeyDates[apiKeyId]\n    apiKeyUsage.forEach(dailyUsage => {\n      const date = dailyUsage[0]\n      const value = dailyUsage[1]\n      \n      if (!dates[date])\n      dates[date] = 0\n      dates[date] += value\n    })\n  })\n  \n  const usageByDate = Object.keys(dates).sort().map(date => [date, dates[date]])\n  \n  return usageByDate\n}\n\nfunction mapApiKeyUsageByDate(apiKeyUsage, startDate, usedOrRemaining) {\n  const dateParts = startDate.split('-')\n  const year = dateParts[0]\n  const month = dateParts[1]\n  const day = dateParts[2]\n  const apiKeyDate = new Date(year, month - 1, day)\n  apiKeyDate.setHours(0, 0, 0, 0)\n  const usedOrRemainingIndex = usedOrRemaining === 'used'\n  ? 0\n  : 1\n  \n  if (apiKeyUsage && !Array.isArray(apiKeyUsage[0]))\n  apiKeyUsage = [apiKeyUsage]\n  \n  return apiKeyUsage.map((usage) => {\n    const date = apiKeyDate.setDate(apiKeyDate.getDate())\n    const item = [date, usage[usedOrRemainingIndex]]\n    apiKeyDate.setDate(apiKeyDate.getDate() + 1)\n    return item\n  })\n}\n\n/* Marketplace integration */\n\nexport function confirmMarketplaceSubscription(usagePlanId, token) {\n  if (!usagePlanId) {\n    return\n  }\n  \n  return apiGatewayClient()\n    .then(apiGatewayClient => apiGatewayClient.put('/marketplace-subscriptions/' + usagePlanId, {}, {\"token\" : token}))\n}","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\nimport { Grid, Header, Popup, Loader, Message, List, Divider } from 'semantic-ui-react'\n\nimport Chart from 'chart.js'\nimport { fetchUsage, mapUsageByDate } from 'services/api-catalog'\n\nimport { observer } from 'mobx-react'\n\nimport { store } from 'services/state'\n\nimport _ from 'lodash'\n\nfunction loadUsage(usagePlan, canvasId) {\n  fetchUsage(usagePlan.id)\n    .then((result) => {\n      const data = mapUsageByDate(result.data, 'used')\n      const ctx = document.getElementById(canvasId)\n\n      let oldDataString = JSON.stringify(_.get(usagePlan, 'usage.data', {}))\n      let newDataString = JSON.stringify(data)\n\n      if (oldDataString !== newDataString)\n        usagePlan.usage = { data }\n\n      const chartConfig = {\n        type: 'line',\n        data: {\n          labels: data.map(d => new Date(parseInt(d[0], 10)).toLocaleDateString()),\n          datasets: [\n            {\n              label: 'Usage',\n              data: data.map(d => d[1]),\n              lineTension: 0,\n              backgroundColor: 'rgba(255, 99, 132, 0.2)',\n              borderColor: 'rgba(255,99,132,1)',\n              borderWidth: 2,\n              pointRadius: 4,\n              pointHoverRadius: 6\n            }\n          ]\n        },\n        options: { scales: { yAxes: [ { ticks: { beginAtZero: true } } ] } }\n      }\n\n      new Chart(ctx, chartConfig)\n    })\n    .catch((error) => {\n      usagePlan.usage = { error }\n    })\n}\n\nexport default observer(() => {\n  return (\n    <Grid container>\n      <Grid.Row>\n        <Grid.Column style={{ paddingTop: \"40px\" }}>\n            <Header size=\"medium\">API Key</Header>\n            <code style={{\n              background: \"black\",\n              border: \"1px solid gray\",\n              padding: \"7px 8px\",\n              color: \"lightgray\",\n              borderRadius: \"5px\"\n            }}>\n              {store.apiKey}\n            </code>\n        </Grid.Column>\n      </Grid.Row>\n      <Divider />\n      <Grid.Row>\n\n      {store.catalog.apiGateway\n        .filter(usagePlan => usagePlan.subscribed)\n        .map((usagePlan, index) => {\n\n        let firstApiName = usagePlan.apis[0].swagger.info.title\n        let extraApiCount = usagePlan.apis.length - 1\n        let apiList = usagePlan.apis.reduce((acc, api) => acc.concat(\n          <List.Item key={api.id}>{api.swagger.info.title}</List.Item>\n        ), [])\n        let canvasId = `api-usage-chart-container-${usagePlan.id}` + index\n\n        loadUsage(usagePlan, canvasId)\n\n        return (\n          <Grid.Column width={16} widescreen={8} key={usagePlan.id} style={{ marginBottom: \"40px\" }}>\n            <Header size=\"medium\">\n              Usage for {extraApiCount ? (\n                <Popup\n                  trigger={ <a style={{ cursor: \"pointer\" }}>{firstApiName} and {extraApiCount} more...</a> }\n                  content={ <List> {apiList} </List> }\n                  on={['hover', 'click']}\n                  position=\"right center\"\n                />\n              ) : (\n                firstApiName\n              )}\n            </Header>\n              \n              { !usagePlan.usage ? (\n                <Loader active />\n              ) : ( \n                usagePlan.error ? (\n                  <Message error content={usagePlan.error.toString()} />\n                ) : null\n              )}\n              <canvas id={canvasId} />\n          </Grid.Column>\n        )\n      })}\n      </Grid.Row>\n    </Grid>\n  )\n})\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport AWS from 'aws-sdk'\nimport { CognitoUserPool, CognitoUser, AuthenticationDetails } from 'amazon-cognito-identity-js'\n\n// services\nimport { store } from 'services/state'\nimport { initApiGatewayClient, apiGatewayClient } from 'services/api'\nimport { updateAllUserData } from 'services/api-catalog'\nimport { cognitoIdentityPoolId, cognitoUserPoolId, cognitoClientId, cognitoRegion } from 'services/api'\n\nconst poolData = {\n  UserPoolId: cognitoUserPoolId,\n  ClientId: cognitoClientId\n}\n\nlet cognitoUser\nlet userPool\n\nexport function isAuthenticated() {\n  return cognitoUser\n}\n\nfunction getCognitoLoginKey() {\n  return `cognito-idp.${cognitoRegion}.amazonaws.com/${cognitoUserPoolId}`\n}\n\nexport function init() {\n  // attempt to refresh credentials from active session\n  userPool = new CognitoUserPool(poolData)\n  cognitoUser = userPool.getCurrentUser()\n\n  if (cognitoUser !== null) {\n    cognitoUser.getSession(function(err, session) {\n      if (err) {\n        logout()\n        console.error(err)\n        return\n      }\n\n      const cognitoLoginKey = getCognitoLoginKey()\n      const Logins = {}\n      Logins[cognitoLoginKey] = session.getIdToken().getJwtToken()\n      AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n        IdentityPoolId: cognitoIdentityPoolId,\n        Logins: Logins\n      })\n\n      AWS.config.credentials.refresh((error) => {\n        if (error) {\n          logout()\n          console.error(error)\n        } else {\n          initApiGatewayClient(AWS.config.credentials)\n          updateAllUserData()\n        }\n      })\n    })\n  } else {\n    initApiGatewayClient()\n  }\n}\n\nexport function register(email, password) {\n  localStorage.clear()\n  const attributeList = []\n  return new Promise((resolve, reject) => {\n    userPool.signUp(email, password, attributeList, null, (err, result) => {\n      if (err) {\n        reject(err)\n      } else {\n        resolve(login(email, password))\n      }\n    })\n  })\n}\n\nexport function login(email, password) {\n    const authenticationDetails = new AuthenticationDetails({\n      Username: email,\n      Password: password\n    })\n\n    cognitoUser = new CognitoUser({\n      Username: email,\n      Pool: new CognitoUserPool(poolData)\n    })\n\n    return new Promise((resolve, reject) => {\n      cognitoUser.authenticateUser(authenticationDetails, {\n        onSuccess: (result) => {\n\n          AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n            IdentityPoolId: cognitoIdentityPoolId,\n            Logins: {\n              [getCognitoLoginKey()]: result.getIdToken().getJwtToken()\n            }\n          })\n\n          AWS.config.credentials.refresh((error) => {\n            if (error) {\n              console.error(error)\n            } else {\n              initApiGatewayClient(AWS.config.credentials)\n\n              apiGatewayClient().then(apiGatewayClient => \n                apiGatewayClient.post('/signin', {}, {}, {})\n                  .then(resolve)\n                  .catch(reject)\n              )\n            }\n          })\n        },\n\n        onFailure: reject\n    })\n  })\n}\n\nexport function logout() {\n  if (cognitoUser) {\n    cognitoUser.signOut()\n    cognitoUser = null\n    store.subscriptions = []\n    localStorage.clear()\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Link } from 'react-router-dom'\n\n// semantic-ui\nimport { Menu, Loader } from 'semantic-ui-react'\n\n// store\nimport { observer } from 'mobx-react'\nimport { store } from 'services/state'\n\nconst MenuHeader = ({ children }) => <Menu.Header style={{ padding: \"13px 5px 13px 16px\", color: '#0FF' }} color='lightsteelblue'>\n  {children}</Menu.Header>\n\nexport default observer(class ApisMenu extends React.Component {\n  state = {\n    selectedApi: ''\n  }\n\n  componentDidMount() {\n    if (this.props.path.params)\n      this.setState(prev => ({\n        ...prev,\n        selectedApi: this.props.path.params.apiId\n      }))\n  }\n\n  handleClick = (id) => {\n    console.log(`${id}`)\n    this.setState(prev => ({...prev, selectedApi: id}))\n  }\n\n  isActive = (apiId) => apiId === this.state.selectedApi\n\n  render() {\n    const { path, ...props } = this.props\n    return (\n      <Menu inverted vertical attached style={{ margin: 0, borderRadius: 0 }} {...props}>\n        <MenuHeader>Subscribable</MenuHeader>\n        {\n          !store.apiList ? (<Loader active />) : (\n            store.apiList.apiGateway && (\n              store.apiList.apiGateway.length ? store.apiList.apiGateway.map((api) => (\n                <Menu.Item\n                  key={api.id}\n                  as={Link}\n                  to={`/apis/${api.id}`}\n                  active={this.isActive(api.id.toString())}\n                  onClick={() => this.handleClick(api.id)}\n                >\n                  {api.swagger.info.title}\n                </Menu.Item>\n              )) : (\n                  <p style={{ padding: \"13px 16px\", color: \"whitesmoke\" }}>No APIs Published</p>\n                )\n            )\n          )\n        }\n        {store.apiList && store.apiList.generic && <MenuHeader>Not Subscribable</MenuHeader>}\n        {\n          store.apiList && store.apiList.generic ?\n            store.apiList.generic.map(({ id, swagger }) => (\n              <Menu.Item\n                key={id}\n                as={Link}\n                to={`/apis/${id}`}\n                active={this.isActive(id.toString())}\n                onClick={() => this.handleClick(id)}\n              >\n                {swagger.info.title}\n              </Menu.Item>\n            )) : undefined\n        }\n      </Menu>\n    )\n  }\n})\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// semantic-ui\nimport { Button, Header, Image, Container } from 'semantic-ui-react'\n\n// services\nimport { subscribe, unsubscribe } from 'services/api-catalog'\nimport { isAuthenticated } from 'services/self'\n\n// state\nimport { observer } from 'mobx-react'\nimport { store } from 'services/state.js'\n\n// Create the plugin that provides our layout component\nexport const SwaggerLayoutPlugin = () => ({ components: { InfoContainer: InfoReplacement } })\n\n// replaces the InfoContainer component\n// https://github.com/swagger-api/swagger-ui/blob/dd3afdc45656bda2a64ae6a7f9bdad006ea98149/src/core/components/layouts/base.jsx\n\nconst InfoReplacement = observer(({ specSelectors }) => {\n  const basePath = specSelectors.basePath()\n  const host = specSelectors.host()\n  const externalDocs = specSelectors.externalDocs()\n\n  return (\n    <Container fluid textAlign='left' className=\"fixfloat\" style={{ padding: \"40px 0px\" }}>\n      <div style={{ display: \"flex\" }}>\n        <div style={{ flex: \"0 0 auto\", marginRight: \"20px\" }}>\n          <Image size='small' src={store.api.logo} />\n        </div>\n        <div>\n          <Header as='h1'>{store.api.swagger.info.title}</Header>\n          <div style={{ display: \"flex\" }}>\n            <div style={{ marginRight: \"20px\" }}>\n              <p style={{ fontWeight: \"bold\" }}>Version</p>\n              <p style={{ fontWeight: \"bold\" }}>Endpoint</p>\n              {/* <p style={{ fontWeight: \"bold\" }}>Usage Plan</p> */}\n            </div>\n            <div>\n              <p>{store.api.swagger.info.version}</p>\n              <p>https://{host}{basePath}</p>\n              {/* <p>{store.api.usagePlan.name}</p> */}\n            </div>\n          </div>\n          <p>{externalDocs}</p>\n          <SubscriptionButtons />\n        </div>\n      </div>\n    </Container>\n  )\n})\n\nconst SubscriptionButtons = observer(class SubscriptionButtons extends React.Component {\n  state = {}\n\n  render() {\n    const { api } = store\n    return (\n      (api && isAuthenticated()) ? !api.generic ? (\n        api.subscribed ? (\n          <Button onClick={() => unsubscribe(api.usagePlan.id)}>Unsubscribe</Button>\n        ) : (\n          <Button onClick={() => subscribe(api.usagePlan.id)} >Subscribe</Button>\n        )\n      ) : <Header as='h4' color='darkgrey'>This API is not configured for subscription from the portal.</Header> : null\n    )\n  }\n})\n\n\nexport default SwaggerLayoutPlugin","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\n\n// swagger-ui\nimport SwaggerUI from 'swagger-ui'\nimport 'swagger-ui/dist/swagger-ui.css'\n\n// semantic-ui\nimport { Container, Header, Icon } from 'semantic-ui-react'\n\n// services\nimport { getApi } from 'services/api-catalog'\nimport { isAuthenticated } from 'services/self'\n\n// components\nimport ApisMenu from 'components/ApisMenu'\nimport SwaggerLayoutPlugin from 'components/SwaggerUiLayout'\n\n// state\nimport { store } from 'services/state.js'\nimport { observer } from 'mobx-react'\n\nexport default observer(class ApisPage extends React.Component {\n  componentDidMount() { this.updateApi() }\n  componentDidUpdate() { this.updateApi() }\n\n  updateApi = () => {\n    getApi(this.props.match.params.apiId || 'ANY', true)\n      .then(api => {\n        if (api) {\n          let swaggerUiConfig = {\n            dom_id: '#swagger-ui-container',\n            plugins: [SwaggerLayoutPlugin],\n            supportedSubmitMethods: [],\n            spec: api.swagger,\n            onComplete: () => uiHandler.preauthorizeApiKey(\"api_key\", store.apiKey)\n          }\n          if (isAuthenticated()) {\n            delete swaggerUiConfig.supportedSubmitMethods\n          }\n          let uiHandler = SwaggerUI(swaggerUiConfig)\n        }\n      })\n  }\n\n  render() {\n    let errorHeader\n    let errorBody \n\n    if (store.apiList && store.apiList.length === 0) {\n      errorHeader = `No APIs Published`\n      errorBody = `Your administrator hasn't added any APIs to your account. Please contact them to publish an API.`\n    } else if (!store.api && store.apiList && store.apiList.length) {\n      errorHeader = `No Such API`\n      errorBody = `The selected API doesn't exist.`\n    }\n\n    return (\n      <div style={{ display: \"flex\", flex: \"1 1 auto\", overflow: \"hidden\" }}>\n        <ApisMenu path={this.props.match} style={{ flex: \"0 0 auto\" }} />\n        <div className=\"swagger-section\" style={{ flex: \"1 1 auto\", overflow: 'auto' }}>\n          <div className=\"swagger-ui-wrap\" id=\"swagger-ui-container\" style={{ padding: \"0 20px\" }}>\n            {errorHeader && errorBody && (\n              <React.Fragment>\n                <Header as='h2' icon textAlign=\"center\" style={{ padding: \"40px 0px\" }}>\n                  <Icon name='warning sign' circular />\n                  <Header.Content>{errorHeader}</Header.Content>\n                </Header>\n                <Container text textAlign='justified'>\n                  <p>{errorBody}</p>\n                </Container>\n              </React.Fragment>\n            )}\n          </div>\n        </div>\n      </div>\n    )\n  }\n})\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Message } from 'semantic-ui-react'\n\nexport default class AlertPopup extends React.Component {\n  state = {\n    isVisible: false,\n    message: ''\n  }\n\n  handleDismiss = () => {\n    this.setState({ isVisible: false })\n  }\n\n  render() {\n      return (\n        <Message\n          hidden={!this.state.isVisible}\n          negative\n          floating\n          icon='warning sign'\n          onDismiss={this.handleDismiss}\n          header='Error'\n          content={this.state.message}\n        />\n      )\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Button, Form, Message, Modal } from 'semantic-ui-react'\nimport { Redirect } from 'react-router-dom'\nimport { login } from 'services/self'\nimport { confirmMarketplaceSubscription } from 'services/api-catalog'\n\n export default class SignIn extends React.Component {\n   state = {\n     isSubmitting: false,\n     signedIn: false,\n     errorMessage: '',\n     isOpen: false\n   }\n   open = () => this.setState({ isSubmitting: false, errorMessage: '', isOpen: true })\n   close = () => this.setState({ isOpen: false })\n\n   handleChange = (event, { name, value }) => this.setState({ [name]: value })\n   handleLogin = (event) => {\n    event.preventDefault()\n    this.setState({isSubmitting: true})\n\n    login(this.state.email, this.state.password)\n    .then(() => {\n        this.setState({signedIn: true, isSubmitting: false, errorMessage: ''})\n\n        const { usagePlanId, token } = this.props\n\n        if (usagePlanId && token) {\n   \t       return confirmMarketplaceSubscription(usagePlanId, token)\n        }\n    })\n    .catch((e) => this.setState({errorMessage: e.message, isSubmitting: false}))\n  }\n\n  render() {\n    const { isOpen } = this.state\n\n    return this.state.signedIn ? <Redirect to='/apis' /> : (\n      <Modal\n        size='small'\n        open={isOpen}\n        onOpen={this.open}\n        onClose={this.close}\n        trigger={this.props.trigger}\n      >\n        <Modal.Header>Sign in</Modal.Header>\n        <Modal.Content>\n          <Form onSubmit={this.handleLogin} error={!!this.state.errorMessage} loading={this.state.isSubmitting}>\n            <Form.Input label='Email' name='email' onChange={this.handleChange} />\n            <Form.Input type='password' label='Password' name='password' autoComplete='false' onChange={this.handleChange} />\n            <Message error content={this.state.errorMessage} />\n            <Modal.Actions style={{textAlign: 'right'}}>\n              <Button type='button' onClick={this.close}>Close</Button>\n              <Button primary type='submit'>Sign In</Button>\n            </Modal.Actions>\n          </Form>\n        </Modal.Content>\n      </Modal>)\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Button, Form, Message, Modal } from 'semantic-ui-react'\nimport { Redirect } from 'react-router-dom'\nimport { register } from 'services/self'\nimport { confirmMarketplaceSubscription } from 'services/api-catalog'\n\n export default class Register extends React.Component {\n  state = {\n    isSubmitting: false,\n    signedIn: false,\n    errorMessage: '',\n    isOpen: false\n  }\n\n  open = () => this.setState({ isSubmitting: false, errorMessage: '', isOpen: true })\n  close = () => this.setState({ isOpen: false })\n\n  handleChange = (event, { name, value }) => this.setState({ [name]: value })\n  handleRegister = (event) => {\n    event.preventDefault()\n    this.setState({ isSubmitting: true })\n\n    register(this.state.email, this.state.password)\n    .then(() => {\n        this.setState({signedIn: true, isSubmitting: false, errorMessage: ''})\n\n        const { usagePlanId, token } = this.props\n\n        if (usagePlanId && token) {\n   \t       return confirmMarketplaceSubscription(usagePlanId, token)\n        }\n    })\n    .catch((e) => this.setState({errorMessage: e.message, isSubmitting: false}))\n  }\n\n  render() {\n    const { isOpen } = this.state\n\n    return this.state.signedIn ? <Redirect to='/apis' /> : (\n      <Modal\n        size='small'\n        open={isOpen}\n        onOpen={this.open}\n        onClose={this.close}\n        trigger={this.props.trigger}\n      >\n        <Modal.Header>Register</Modal.Header>\n        <Modal.Content>\n          <Form onSubmit={this.handleRegister} error={!!this.state.errorMessage} loading={this.state.isSubmitting}>\n            <Form.Input label='Email' name='email' onChange={this.handleChange} />\n            <Form.Input type='password' label='Password' name='password' autoComplete='false' onChange={this.handleChange} />\n            <Message error content={this.state.errorMessage} />\n            <Modal.Actions style={{textAlign: 'right'}}>\n              <Button type='button' onClick={this.close}>Close</Button>\n              <Button primary type='submit'>Register</Button>\n            </Modal.Actions>\n          </Form>\n        </Modal.Content>\n      </Modal>)\n    }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Redirect} from 'react-router-dom'\nimport { logout, isAuthenticated } from 'services/self'\n\nexport default class SignOut extends React.Component {\n  logout = () => {\n    logout()\n    this.forceUpdate()\n  }\n\n  render() {\n    return isAuthenticated() ? (\n      React.cloneElement( this.props.trigger, { onClick: this.logout })\n    ) : (\n      <Redirect to='/' />\n    )\n  }\n}\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react'\nimport { Link } from 'react-router-dom'\nimport { Menu, Image } from 'semantic-ui-react'\n\nimport { isAuthenticated } from 'services/self'\n\n// mobx\nimport { observer } from 'mobx-react'\n\n// fragments\nimport { fragments } from 'services/get-fragments'\n\n// components\nimport SignIn from './SignIn'\nimport Register from './Register'\nimport SignOut from './SignOut'\n\nexport const NavBar = observer(() => {\n  let authed = isAuthenticated()\n  return (\n    <Menu inverted borderless attached style={{ flex: \"0 0 auto\" }}>\n      <Menu.Item as={Link} to=\"/\">\n        <Image size='mini' src=\"/custom-content/nav-logo.png\" style={{ paddingRight: \"10px\" }} />\n        {fragments.Home.title}\n      </Menu.Item>\n      <Menu.Item as={Link} to=\"/getting-started\">{fragments.GettingStarted.title}</Menu.Item>\n      <Menu.Item as={Link} to=\"/apis\">{fragments.APIs.title}</Menu.Item>\n      <Menu.Menu position=\"right\">\n        { authed ? (\n          <React.Fragment>\n            <SignOut trigger={<Menu.Item as=\"a\" key=\"logout\">Sign Out</Menu.Item>} />\n            <Menu.Item as={Link} to=\"/dashboard\" key=\"dashboard\">My Dashboard</Menu.Item>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            <SignIn trigger={<Menu.Item as=\"a\" key=\"login\">Sign In</Menu.Item>} />\n            <Register trigger={<Menu.Item as=\"a\" key=\"register\">Register</Menu.Item>} /> \n          </React.Fragment>\n        )}\n      </Menu.Menu>\n    </Menu>\n  )\n})\n\nexport default NavBar\n","// Copyright 2018 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route, Switch } from 'react-router-dom'\n\n// content-fragments (import here to start this ASAP)\nimport 'services/get-fragments'\n\n// semantic-ui\nimport 'semantic-ui-css/semantic.css'\n\n// pages\nimport Home from 'pages/Home'\nimport GettingStarted from 'pages/GettingStarted'\nimport Dashboard from 'pages/Dashboard'\nimport Apis from 'pages/Apis'\n\n// components\nimport AlertPopup from 'components/AlertPopup'\nimport NavBar from 'components/NavBar'\n\nimport { init } from 'services/self'\nimport './index.css';\n\nclass App extends React.Component {\n  constructor() {\n    super()\n    init()\n\n    // We are using an S3 redirect rule to prefix the url path with #!\n    // This then converts it back to a URL path for React routing\n    const hashRoute = window.location.hash.substring(2)\n    window.history.pushState({}, 'home page', hashRoute)\n  }\n\n  render() {\n    return (\n      <BrowserRouter>\n        <React.Fragment>\n          <NavBar />\n          <AlertPopup />\n          <Switch>\n            <Route exact path=\"/\" component={Home} />\n            <Route path=\"/getting-started\" component={GettingStarted} />\n            <Route path=\"/dashboard\" component={Dashboard} />\n            <Route exact path=\"/apis\" component={Apis} />\n            <Route path=\"/apis/:apiId\" component={Apis} />\n            <Route component={() => <h2>Page not found</h2>} />\n          </Switch>\n        </React.Fragment>\n      </BrowserRouter>\n    )\n  }\n}\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}